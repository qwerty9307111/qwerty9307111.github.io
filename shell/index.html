<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Shell 教程笔记 | yinwenwu&#39; blog</title>
    <meta name="description" content="Welcome to my Blog">
    <link rel="icon" href="/images/logo.png">
  <link rel="manifest" href="/images/logo.png">
  <link rel="apple-touch-icon" href="/images/logo.png">
  <link rel="mask-icon" href="/images/logo.png" color="#3eaf7c">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="expires" cotent="0">
  <meta http-quiv="pragma" cotent="no-cache, must-revalidate">
    
    <link rel="preload" href="/assets/css/0.styles.d26d9116.css" as="style"><link rel="preload" href="/assets/js/app.fe53f5dd.js" as="script"><link rel="preload" href="/assets/js/2.ba4870f1.js" as="script"><link rel="preload" href="/assets/js/27.d0bd7cc8.js" as="script"><link rel="prefetch" href="/assets/js/10.115a3dad.js"><link rel="prefetch" href="/assets/js/11.fe30554d.js"><link rel="prefetch" href="/assets/js/12.e45cb193.js"><link rel="prefetch" href="/assets/js/13.c2282e76.js"><link rel="prefetch" href="/assets/js/14.269603a0.js"><link rel="prefetch" href="/assets/js/15.650993d7.js"><link rel="prefetch" href="/assets/js/16.cba726dc.js"><link rel="prefetch" href="/assets/js/17.78ea9ea0.js"><link rel="prefetch" href="/assets/js/18.0d7025b6.js"><link rel="prefetch" href="/assets/js/19.f049889e.js"><link rel="prefetch" href="/assets/js/20.23aa1da5.js"><link rel="prefetch" href="/assets/js/21.722c3401.js"><link rel="prefetch" href="/assets/js/22.ca7a7239.js"><link rel="prefetch" href="/assets/js/23.f81df4aa.js"><link rel="prefetch" href="/assets/js/24.aee7f683.js"><link rel="prefetch" href="/assets/js/25.42794387.js"><link rel="prefetch" href="/assets/js/26.02e1d7cc.js"><link rel="prefetch" href="/assets/js/28.ebd7e8e2.js"><link rel="prefetch" href="/assets/js/29.338cd6e7.js"><link rel="prefetch" href="/assets/js/3.db1e39ed.js"><link rel="prefetch" href="/assets/js/30.0c59af09.js"><link rel="prefetch" href="/assets/js/31.3925940b.js"><link rel="prefetch" href="/assets/js/4.6ee6c078.js"><link rel="prefetch" href="/assets/js/5.08c5fba9.js"><link rel="prefetch" href="/assets/js/6.9cc7e999.js"><link rel="prefetch" href="/assets/js/7.2b233b2a.js"><link rel="prefetch" href="/assets/js/8.6e5f4324.js"><link rel="prefetch" href="/assets/js/9.541bf229.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d26d9116.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">yinwenwu' blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/basic/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basic/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/basic/TypeScript/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/frame/React/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/frame/Flutter/" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="/catalog/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/abstract/" class="nav-link">读书文摘</a></div><div class="nav-item"><a href="https://github.com/qwerty9307111" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/JavaScript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/basic/HTML/" class="nav-link">HTML</a></li><li class="dropdown-item"><!----> <a href="/basic/CSS/" class="nav-link">CSS</a></li><li class="dropdown-item"><!----> <a href="/basic/TypeScript/" class="nav-link">TypeScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frame/Vue/" class="nav-link">Vue</a></li><li class="dropdown-item"><!----> <a href="/frame/React/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/frame/Flutter/" class="nav-link">Flutter</a></li></ul></div></div><div class="nav-item"><a href="/catalog/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/abstract/" class="nav-link">读书文摘</a></div><div class="nav-item"><a href="https://github.com/qwerty9307111" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/catalog/" class="sidebar-link">Catalog</a></li><li><a href="/shell/" class="active sidebar-link">Shell 教程笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shell/#运行-shell-脚本" class="sidebar-link">运行 Shell 脚本</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-变量" class="sidebar-link">Shell 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shell/#定义变量" class="sidebar-link">定义变量</a></li><li class="sidebar-sub-header"><a href="/shell/#使用变量" class="sidebar-link">使用变量</a></li><li class="sidebar-sub-header"><a href="/shell/#只读变量" class="sidebar-link">只读变量</a></li><li class="sidebar-sub-header"><a href="/shell/#删除变量" class="sidebar-link">删除变量</a></li><li class="sidebar-sub-header"><a href="/shell/#变量类型" class="sidebar-link">变量类型</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-字符串" class="sidebar-link">Shell 字符串</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-数组" class="sidebar-link">Shell 数组</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-注释" class="sidebar-link">Shell 注释</a></li></ul></li><li class="sidebar-sub-header"><a href="/shell/#shell-传递参数" class="sidebar-link">Shell 传递参数</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-运算符" class="sidebar-link">Shell 运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shell/#算数运算符" class="sidebar-link">算数运算符</a></li><li class="sidebar-sub-header"><a href="/shell/#关系运算符" class="sidebar-link">关系运算符</a></li><li class="sidebar-sub-header"><a href="/shell/#布尔运算符" class="sidebar-link">布尔运算符</a></li><li class="sidebar-sub-header"><a href="/shell/#逻辑运算符" class="sidebar-link">逻辑运算符</a></li><li class="sidebar-sub-header"><a href="/shell/#字符串运算符" class="sidebar-link">字符串运算符</a></li><li class="sidebar-sub-header"><a href="/shell/#文件测试运算符" class="sidebar-link">文件测试运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/shell/#shell-流程控制" class="sidebar-link">Shell 流程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shell/#if-else" class="sidebar-link">if else</a></li><li class="sidebar-sub-header"><a href="/shell/#for-循环" class="sidebar-link">for 循环</a></li><li class="sidebar-sub-header"><a href="/shell/#while-循环" class="sidebar-link">while 循环</a></li><li class="sidebar-sub-header"><a href="/shell/#until-循环" class="sidebar-link">until 循环</a></li><li class="sidebar-sub-header"><a href="/shell/#case" class="sidebar-link">case</a></li><li class="sidebar-sub-header"><a href="/shell/#跳出循环" class="sidebar-link">跳出循环</a></li></ul></li><li class="sidebar-sub-header"><a href="/shell/#shell-函数" class="sidebar-link">Shell 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/shell/#函数参数" class="sidebar-link">函数参数</a></li></ul></li><li class="sidebar-sub-header"><a href="/shell/#shell-输入-输出重定向" class="sidebar-link">Shell 输入/输出重定向</a></li><li class="sidebar-sub-header"><a href="/shell/#shell-文件包含" class="sidebar-link">Shell 文件包含</a></li></ul></li><li><a href="/vim/" class="sidebar-link">慕课网 《玩转 Vim 从放弃到爱不释手》 笔记</a></li><li><a href="/designPatterns/" class="sidebar-link">JavaScript 设计模式核⼼原理与应⽤实践笔记</a></li><li><a href="/relearningF2E/" class="sidebar-link">重学前端笔记</a></li><li><a href="/devconfig/" class="sidebar-link">git commit 规范指北</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="shell-教程笔记"><a href="#shell-教程笔记" aria-hidden="true" class="header-anchor">#</a> Shell 教程笔记</h1> <ul><li><a href="#%E8%BF%90%E8%A1%8C-shell-%E8%84%9A%E6%9C%AC">运行 Shell 脚本</a></li> <li><a href="#shell-%E5%8F%98%E9%87%8F">Shell 变量</a> <ul><li><a href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">定义变量</a></li> <li><a href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F">使用变量</a></li> <li><a href="#%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F">只读变量</a></li> <li><a href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F">删除变量</a></li> <li><a href="#%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B">变量类型</a></li> <li><a href="#shell-%E5%AD%97%E7%AC%A6%E4%B8%B2">Shell 字符串</a> <ul><li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5">字符串拼接</a></li> <li><a href="#%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6">获取字符串长度</a></li> <li><a href="#%E6%8F%90%E5%8F%96%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2">提取子字符串</a></li> <li><a href="#%E6%9F%A5%E6%89%BE%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2">查找子字符串</a></li></ul></li> <li><a href="#shell-%E6%95%B0%E7%BB%84">Shell 数组</a> <ul><li><a href="#%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84">定义数组</a></li> <li><a href="#%E8%AF%BB%E5%8F%96%E6%95%B0%E7%BB%84">读取数组</a></li> <li><a href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6">获取数组长度</a></li></ul></li> <li><a href="#shell-%E6%B3%A8%E9%87%8A">Shell 注释</a></li></ul></li> <li><a href="#shell-%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0">Shell 传递参数</a></li> <li><a href="#shell-%E8%BF%90%E7%AE%97%E7%AC%A6">Shell 运算符</a> <ul><li><a href="#%E7%AE%97%E6%95%B0%E8%BF%90%E7%AE%97%E7%AC%A6">算数运算符</a></li> <li><a href="#%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6">关系运算符</a></li> <li><a href="#%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E7%AC%A6">布尔运算符</a></li> <li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%90%E7%AE%97%E7%AC%A6">字符串运算度</a></li> <li><a href="#%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E8%BF%90%E7%AE%97%E7%AC%A6">文件测试运算符</a></li></ul></li> <li><a href="#shell-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">Shell 流程控制</a> <ul><li><a href="#if-else">if else</a></li> <li><a href="#for-%E5%BE%AA%E7%8E%AF">for 循环</a></li> <li><a href="#while-%E5%BE%AA%E7%8E%AF">while 循环</a></li> <li><a href="#until-%E5%BE%AA%E7%8E%AF">until 循环</a></li> <li><a href="#case">case</a></li> <li><a href="#%E8%B7%B3%E5%87%BA%E5%BE%AA%E7%8E%AF">跳出循环</a></li></ul></li> <li><a href="#shell-%E5%87%BD%E6%95%B0">Shell 函数</a> <ul><li><a href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">函数参数</a></li></ul></li> <li><a href="#shell-%E8%BE%93%E5%85%A5-%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91">Shell 输入/输出重定向</a></li> <li><a href="#shell-%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB">Shell 文件包含</a></li></ul> <p>shell 脚本第一行一般以　#!/bin/sh 或 #!/bin/bash 开头。<strong>#!</strong> 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种 Shell。</p> <h2 id="运行-shell-脚本"><a href="#运行-shell-脚本" aria-hidden="true" class="header-anchor">#</a> 运行 Shell 脚本</h2> <ol><li>作为可执行程序</li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chmod</span> +x ./test.sh <span class="token comment"># 使脚本具有执行权限</span>
./test.hs <span class="token comment"># 执行脚本</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li><p>作为解释器参数</p> <blockquote><p>用这种方式运行的脚本，不需要在第一行制定解释器信息</p></blockquote></li></ol> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>sh test.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="shell-变量"><a href="#shell-变量" aria-hidden="true" class="header-anchor">#</a> Shell 变量</h2> <h3 id="定义变量"><a href="#定义变量" aria-hidden="true" class="header-anchor">#</a> 定义变量</h3> <p>定义变量时，变量名不加美元符号</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>your_name<span class="token operator">=</span><span class="token string">&quot;yin&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意，变量名和等号之间不能有空格</p> <ul><li>命名只能使用英文字母，数字和下划线，首个字符不能以数字开头。</li> <li>中间不能有空格，可以使用下划线（_）。</li> <li>不能使用标点符号。</li> <li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li></ul></blockquote> <p>除了显式地直接赋值，还可以用语句给变量赋值。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token function">file</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">`</span><span class="token function">ls</span> /etc<span class="token variable">`</span></span>

<span class="token keyword">for</span> <span class="token function">file</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> /etc<span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用变量"><a href="#使用变量" aria-hidden="true" class="header-anchor">#</a> 使用变量</h3> <p>使用一个定义过的变量，只要在变量名前加上美元符号即可：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>your_name<span class="token operator">=</span><span class="token string">&quot;yin&quot;</span>
<span class="token keyword">echo</span> <span class="token variable">$your_name</span>
<span class="token keyword">echo</span> <span class="token variable">${your_name}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>变量名外面的花括号是可选的，加不加都行，加花括号是为了帮助解释器识别变量的边界。推荐给所有变量加上花括号。</p> <p>已定义的变量，可以被重新定义：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>your_name<span class="token operator">=</span><span class="token string">&quot;yin&quot;</span>
<span class="token keyword">echo</span> <span class="token variable">$your_name</span> <span class="token comment"># yin</span>
your_name<span class="token operator">=</span><span class="token string">&quot;alibaba&quot;</span>
<span class="token keyword">echo</span> <span class="token variable">$your_name</span> <span class="token comment"># alibaba</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="只读变量"><a href="#只读变量" aria-hidden="true" class="header-anchor">#</a> 只读变量</h3> <p>使用 readonly 命令可以将变量定义为只读变量，其值不能被改变。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>my_url<span class="token operator">=</span><span class="token string">&quot;http://yinxiubin.com&quot;</span>
<span class="token function">readonly</span> my_url
my_url<span class="token operator">=</span><span class="token string">&quot;http://yinwenwu.com&quot;</span>

<span class="token comment"># 运行结果：</span>
 my_url: is <span class="token function">read</span> only
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="删除变量"><a href="#删除变量" aria-hidden="true" class="header-anchor">#</a> 删除变量</h3> <p>使用 unset 命令可以删除变量。</p> <blockquote><p>变量被删除后不能再次使用。unset 命令不能删除只读变量。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>my_url<span class="token operator">=</span><span class="token string">&quot;http:yinxiubin.com&quot;</span>
unset my_url
<span class="token keyword">echo</span> <span class="token variable">$my_url</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="变量类型"><a href="#变量类型" aria-hidden="true" class="header-anchor">#</a> 变量类型</h3> <p>运行 shell 时，会同时存在三种变量：</p> <ol><li><strong>局部变量</strong>: 局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</li> <li><strong>环境变量</strong>: 所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</li> <li><strong>shell变量</strong>: shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行。</li></ol> <h3 id="shell-字符串"><a href="#shell-字符串" aria-hidden="true" class="header-anchor">#</a> Shell 字符串</h3> <p>字符串可以用单引号，也可以用双引号，也可以不用引号。单引号里的字符会原样输出，双引号里可以有变量和转义字符。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>str<span class="token operator">=</span><span class="token string">'this is a string'</span>

your_name<span class="token operator">=</span><span class="token string">'yin'</span>
str<span class="token operator">=</span><span class="token string">&quot;Hello,\&quot;<span class="token variable">${your_name}</span>\&quot;!&quot;</span>
<span class="token keyword">echo</span> str

<span class="token comment"># 输出结果</span>
Hello,<span class="token string">&quot;yin&quot;</span><span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="字符串拼接"><a href="#字符串拼接" aria-hidden="true" class="header-anchor">#</a> 字符串拼接</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>your_name<span class="token operator">=</span><span class="token string">'yin'</span>
<span class="token comment"># 双引号拼接</span>
str<span class="token operator">=</span><span class="token string">&quot;Hello,<span class="token variable">${your_name}</span>!&quot;</span>
str1<span class="token operator">=</span><span class="token string">&quot;Hello,&quot;</span><span class="token variable">${your_name}</span><span class="token string">&quot;!&quot;</span>
<span class="token comment"># 单引号拼接</span>
str2<span class="token operator">=</span><span class="token string">'Hello,'</span><span class="token variable">${your_name}</span><span class="token string">'!'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="获取字符串长度"><a href="#获取字符串长度" aria-hidden="true" class="header-anchor">#</a> 获取字符串长度</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>str<span class="token operator">=</span><span class="token string">&quot;1234&quot;</span>
<span class="token keyword">echo</span> <span class="token variable">${#str}</span> <span class="token comment"># 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="提取子字符串"><a href="#提取子字符串" aria-hidden="true" class="header-anchor">#</a> 提取子字符串</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 从字符串第２个字符开始截取5个字符</span>
str<span class="token operator">=</span><span class="token string">'this is a test string'</span>
<span class="token keyword">echo</span> <span class="token variable">${str:1:5}</span> <span class="token comment"># his i</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="查找子字符串"><a href="#查找子字符串" aria-hidden="true" class="header-anchor">#</a> 查找子字符串</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查找字符 i 或 a 的位置(哪个先出现就计算哪个)</span>
str<span class="token operator">=</span><span class="token string">'this is a test string'</span>
<span class="token keyword">echo</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> index <span class="token string">&quot;<span class="token variable">${str}</span>&quot;</span> io<span class="token variable">`</span></span> <span class="token comment"># 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="shell-数组"><a href="#shell-数组" aria-hidden="true" class="header-anchor">#</a> Shell 数组</h3> <p>bash 支持一维数组（不支持多维数组），并且没有限定数组的大小。获取数组元素是的下标可以使整数或算术表达式，其值应大于等于 0。</p> <h4 id="定义数组"><a href="#定义数组" aria-hidden="true" class="header-anchor">#</a> 定义数组</h4> <p>在 Shell 中，用括号表示数组，元素间用空格符分隔开。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 数组名=(值１ 值２ ... 值n)</span>
array_name<span class="token operator">=</span><span class="token punctuation">(</span>value0 value1 value2 value3<span class="token punctuation">)</span>
<span class="token comment"># 或者</span>
array_name<span class="token operator">=</span><span class="token punctuation">(</span>
  value0
  value1
  value2
  value3
<span class="token punctuation">)</span>
<span class="token comment"># 还可以单独定义数组的各个分量</span>
array_name<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token operator">=</span>value0
array_name<span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token operator">=</span>value1
array_name<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token operator">=</span>valuen
<span class="token comment"># 可以不使用连续的下标，而且下标的范围没有限制</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="读取数组"><a href="#读取数组" aria-hidden="true" class="header-anchor">#</a> 读取数组</h4> <p>读取数组元素值的一般格式是：${数组名[下标]}</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>value<span class="token operator">=</span><span class="token variable">${array_name[n]}</span>
<span class="token comment"># 使用 @ 或 * 符号可以获取数组中的所有元素</span>
<span class="token keyword">echo</span> <span class="token variable">${array_name[@]}</span>
<span class="token keyword">echo</span> <span class="token variable">${array_name[*]}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="获取数组长度"><a href="#获取数组长度" aria-hidden="true" class="header-anchor">#</a> 获取数组长度</h4> <p>获取数组长度的方法与获取字符串长度的方法相同</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 取得数组元素的个数</span>
length<span class="token operator">=</span><span class="token variable">${#array_name[@]}</span>
<span class="token comment"># 或者</span>
length<span class="token operator">=</span><span class="token variable">${#array_name[*]}</span>
<span class="token comment"># 取得数组单个元素的长度</span>
lengthn<span class="token operator">=</span><span class="token variable">${#array_name[n]}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="shell-注释"><a href="#shell-注释" aria-hidden="true" class="header-anchor">#</a> Shell 注释</h3> <p>单行注释：以 # 开头的行就是注释</p> <p>多行注释：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>:<span class="token operator">&lt;&lt;</span><span class="token string">EOF
注释内容...
注释内容...
注释内容...
EOF</span>

:<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
注释内容<span class="token punctuation">..</span>.
注释内容<span class="token punctuation">..</span>.
注释内容<span class="token punctuation">..</span>.
<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="shell-传递参数"><a href="#shell-传递参数" aria-hidden="true" class="header-anchor">#</a> Shell 传递参数</h2> <blockquote><p>脚本内获取参数的格式为：<strong>$n</strong>。<strong>n</strong> 代表一个数字，1 为执行脚本的第一个参数，2 为执行脚本的第二个参数，以此类推……</p></blockquote> <p>实例：向脚本传递三个参数，并分别输出，其中 <strong>$0</strong> 为执行的文件名</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">echo</span> <span class="token string">&quot;Shell 传递参数实例！&quot;</span>
<span class="token keyword">echo</span> <span class="token string">&quot;执行的文件名：<span class="token variable">$0</span>&quot;</span>
<span class="token keyword">echo</span> <span class="token string">&quot;第一个参数为：<span class="token variable">$1</span>&quot;</span>
<span class="token keyword">echo</span> <span class="token string">&quot;第二个参数为：<span class="token variable">$2</span>&quot;</span>
<span class="token keyword">echo</span> <span class="token string">&quot;第三个参数为：<span class="token variable">$3</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><table><thead><tr><th>参数处理</th> <th>说明</th></tr></thead> <tbody><tr><td>$#</td> <td>传递到脚本的参数个数</td></tr> <tr><td>$*</td> <td>以一个字符串显示所有向脚本传递的参数。<br>如&quot;$*&quot;用「&quot;」括起来的情况、以&quot;$1 $2 … $n&quot;的形式输出所有参数。</td></tr> <tr><td>$$</td> <td>脚本运行的当前进程ID号</td></tr> <tr><td>$!</td> <td>后台运行的最后一个进程的ID号</td></tr> <tr><td>$@</td> <td>与$*相同，但是使用时加引号，并在引号中返回每个参数。<br>如&quot;​$@&quot;用「&quot;」括起来的情况、以&quot;​$1&quot; &quot;$2&quot; … &quot;$n&quot; 的形式输出所有参数。</td></tr> <tr><td>$-</td> <td>显示Shell使用的当前选项，与<a href="https://www.runoob.com/linux/linux-comm-set.html" target="_blank" rel="noopener noreferrer">set命令<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>功能相同。</td></tr> <tr><td>$?</td> <td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table> <p>$* 与 $@ 的区别</p> <ul><li><p>相同点：都是引用所有参数</p></li> <li><p>不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，，则 &quot; * &quot; 等价于 &quot;1 2 3&quot;（传递了一个参数），而 &quot;@&quot; 等价于 &quot;1&quot; &quot;2&quot; &quot;3&quot;（传递了三个参数）。</p></li></ul> <h2 id="shell-运算符"><a href="#shell-运算符" aria-hidden="true" class="header-anchor">#</a> Shell 运算符</h2> <p>原生 bash 不支持简单的数学运算，但是可以通过其它命令来实现，例如最常用的 expr - 在 MAC 中 shell 的 expr 语法是：<strong>$((表达式))</strong> 。例如加法：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>value<span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> 2 + 2<span class="token variable">`</span></span>
<span class="token keyword">echo</span> <span class="token string">&quot;2 + 2 = <span class="token variable">${value}</span>&quot;</span> <span class="token comment"># 4</span>
<span class="token keyword">echo</span> <span class="token string">&quot;2 + 2 = <span class="token variable"><span class="token variable">$((</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token variable">))</span></span>&quot;</span> <span class="token comment"># 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注意：</p> <ul><li>表达式和运算符之间要有空格，例如2+2是不对的，必须写成 2 + 2 。</li> <li>完整的表达式要用反引号 ` ` 包含</li></ul> <h3 id="算数运算符"><a href="#算数运算符" aria-hidden="true" class="header-anchor">#</a> 算数运算符</h3> <table><thead><tr><th>运算符</th> <th>说明</th> <th>举例（a=10, b=20）</th></tr></thead> <tbody><tr><td>+</td> <td>加法</td> <td>`expr $a + $b `  # 30</td></tr> <tr><td>-</td> <td>减法</td> <td>`expr $a - $b `  # -10</td></tr> <tr><td>*</td> <td>乘法</td> <td>`expr $a * $b` #  200</td></tr> <tr><td>/</td> <td>除法</td> <td>`expr $a / $b` # 0.5</td></tr> <tr><td>%</td> <td>取余</td> <td>`expr $a % $b` # 10</td></tr> <tr><td>=</td> <td>赋值</td> <td>a=$b 将把变量 b 的值赋给 a</td></tr> <tr><td>==</td> <td>相等。用于比较两个数字，相同则返回 true</td> <td>[ $a == $b ] 返回 false</td></tr> <tr><td>!=</td> <td>不相等。用于比较两个数字，不相同则返回 true</td> <td>[ $a != $b ] 返回 true</td></tr></tbody></table> <p>**注意：**条件表达式要放在方括号之间，并且要有空格，例如: <strong>[$a==​$b]</strong> 是错误的，必须写成 <strong>[ $a == $b ]</strong>。</p> <h3 id="关系运算符"><a href="#关系运算符" aria-hidden="true" class="header-anchor">#</a> 关系运算符</h3> <blockquote><p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p></blockquote> <blockquote><p>进行数值比较时，可以使用 <strong>[ expression1 OP expression2 ]</strong>，<strong>OP</strong> 可以为 <strong>-gt、-lt、-ge、-le、-eq、-ne</strong> 也可以使用 <strong>((expression1 OP expression2))</strong>，<strong>OP</strong> 可以为 <strong>&gt;、&lt;、&gt;=、&lt;=、==、!=</strong>。这几个关系运算符都是测试整数表达式 expression1 和 expression2 之间的大小关系。</p></blockquote> <table><thead><tr><th>运算符</th> <th>说明</th> <th>举例（a=10, b=20）</th></tr></thead> <tbody><tr><td>-eq</td> <td>检测两个数是否相等，相等返回 true。</td> <td>[ $a -eq $b ] 返回 false。</td></tr> <tr><td>-ne</td> <td>检测两个数是否不相等，不相等返回 true。</td> <td>[ $a -ne $b ] 返回 true。</td></tr> <tr><td>-gt</td> <td>检测左边的数是否大于右边的，如果是，则返回 true。</td> <td>[ $a -gt $b ] 返回 false。</td></tr> <tr><td>-lt</td> <td>检测左边的数是否小于右边的，如果是，则返回 true。</td> <td>[ $a -lt $b ] 返回 true。</td></tr> <tr><td>-ge</td> <td>检测左边的数是否大于等于右边的，如果是，则返回 true。</td> <td>[ $a -ge $b ] 返回 false。</td></tr> <tr><td>-le</td> <td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td> <td>[ $a -le b ] 返回 true。</td></tr></tbody></table> <h3 id="布尔运算符"><a href="#布尔运算符" aria-hidden="true" class="header-anchor">#</a> 布尔运算符</h3> <table><thead><tr><th>运算符</th> <th>说明</th> <th>举例（a=10, b=20）</th></tr></thead> <tbody><tr><td>!</td> <td>非运算，表达式为 true 则返回 false，否则返回 true。</td> <td>[ ! false ] 返回 true。</td></tr> <tr><td>-o</td> <td>或运算，有一个表达式为 true 则返回 true。</td> <td>[ $a -lt 20 -o $b -gt 100 ] 返回 true。</td></tr> <tr><td>-a</td> <td>与运算，两个表达式都为 true 才返回 true。</td> <td>[ $a -lt 20 -a $b -gt 100 ] 返回 false。</td></tr></tbody></table> <h3 id="逻辑运算符"><a href="#逻辑运算符" aria-hidden="true" class="header-anchor">#</a> 逻辑运算符</h3> <table><thead><tr><th>运算符</th> <th>说明</th> <th>举例（a=10, b=20）</th></tr></thead> <tbody><tr><td>&amp;&amp;</td> <td>逻辑的 AND</td> <td>[[ $a -lt 100 &amp;&amp; $b -gt 100 ]] 返回 false</td></tr> <tr><td>||</td> <td>逻辑的 OR</td> <td>[[ $a -lt 100 || $b -gt 100 ]] 返回 true</td></tr></tbody></table> <h3 id="字符串运算符"><a href="#字符串运算符" aria-hidden="true" class="header-anchor">#</a> 字符串运算符</h3> <table><thead><tr><th>运算符</th> <th>说明</th> <th>举例（a=&quot;abc&quot;, b=&quot;def&quot;）</th></tr></thead> <tbody><tr><td>=</td> <td>检测两个字符串是否相等，相等返回 true。</td> <td>[ $a = $b ] 返回 false。</td></tr> <tr><td>!=</td> <td>检测两个字符串是否相等，不相等返回 true。</td> <td>[ $a != $b ] 返回 true。</td></tr> <tr><td>-z</td> <td>检测字符串长度是否为0，为0返回 true。</td> <td>[ -z $a ] 返回 false。</td></tr> <tr><td>-n</td> <td>检测字符串长度是否为0，不为0返回 true。</td> <td>[ -n &quot;$a&quot; ] 返回 true。</td></tr> <tr><td>$</td> <td>检测字符串是否为空，不为空返回 true。</td> <td>[ $a ] 返回 true。</td></tr></tbody></table> <h3 id="文件测试运算符"><a href="#文件测试运算符" aria-hidden="true" class="header-anchor">#</a> 文件测试运算符</h3> <blockquote><p>文件测试运算符用于检测 Unix 文件的各种属性。</p></blockquote> <table><thead><tr><th>操作符</th> <th>说明</th> <th>举例</th></tr></thead> <tbody><tr><td>-b file</td> <td>检测文件是否是块设备文件，如果是，则返回 true。</td> <td>[ -b $file ] 返回 false。</td></tr> <tr><td>-c file</td> <td>检测文件是否是字符设备文件，如果是，则返回 true。</td> <td>[ -c $file ] 返回 false。</td></tr> <tr><td>-d file</td> <td>检测文件是否是目录，如果是，则返回 true。</td> <td>[ -d $file ] 返回 false。</td></tr> <tr><td>-f file</td> <td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td> <td>[ -f $file ] 返回 true。</td></tr> <tr><td>-g file</td> <td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td> <td>[ -g $file ] 返回 false。</td></tr> <tr><td>-k file</td> <td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td> <td>[ -k $file ] 返回 false。</td></tr> <tr><td>-p file</td> <td>检测文件是否是有名管道，如果是，则返回 true。</td> <td>[ -p $file ] 返回 false。</td></tr> <tr><td>-u file</td> <td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td> <td>[ -u $file ] 返回 false。</td></tr> <tr><td>-r file</td> <td>检测文件是否可读，如果是，则返回 true。</td> <td>[ -r $file ] 返回 true。</td></tr> <tr><td>-w file</td> <td>检测文件是否可写，如果是，则返回 true。</td> <td>[ -w $file ] 返回 true。</td></tr> <tr><td>-x file</td> <td>检测文件是否可执行，如果是，则返回 true。</td> <td>[ -x $file ] 返回 true。</td></tr> <tr><td>-s file</td> <td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td> <td>[ -s $file ] 返回 true。</td></tr> <tr><td>-e file</td> <td>检测文件（包括目录）是否存在，如果是，则返回 true。</td> <td>[ -e $file ] 返回 true。</td></tr></tbody></table> <p>其他检查符：</p> <ul><li><strong>-S</strong>: 判断某文件是否 socket。</li> <li><strong>-L</strong>: 检测文件是否存在并且是一个符号链接。</li></ul> <h2 id="shell-流程控制"><a href="#shell-流程控制" aria-hidden="true" class="header-anchor">#</a> Shell 流程控制</h2> <blockquote><p>sh 的流程控制不可为空，如果 else 分支没有语句执行，就不要写这个 else 。</p></blockquote> <h3 id="if-else"><a href="#if-else" aria-hidden="true" class="header-anchor">#</a> if else</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">if</span> condition
<span class="token keyword">then</span>
  command1
  command2
<span class="token keyword">elif</span>
  command3
<span class="token keyword">else</span>
  <span class="token function">command</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="for-循环"><a href="#for-循环" aria-hidden="true" class="header-anchor">#</a> for 循环</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">for</span> var <span class="token keyword">in</span> item1 item2 <span class="token punctuation">..</span>. itemN
<span class="token keyword">do</span>
  command1
  command2
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="while-循环"><a href="#while-循环" aria-hidden="true" class="header-anchor">#</a> while 循环</h3> <blockquote><p>while 循环用于不断执行一系列命令，也用于从输入文件中读取数据；命令通常为测试条件。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">while</span> condition
<span class="token keyword">do</span>
  <span class="token function">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="until-循环"><a href="#until-循环" aria-hidden="true" class="header-anchor">#</a> until 循环</h3> <blockquote><p>until 循环执行一系列命令直至条件为 true 时停止。</p></blockquote> <p>until 循环与 while 循环在处理方式上刚好相反。</p> <p>一般 while 循环优于 until 循环，但在某些时候—也只是极少数情况下，until 循环更加有用。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">until</span> condition
<span class="token keyword">do</span>
  <span class="token function">command</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="case"><a href="#case" aria-hidden="true" class="header-anchor">#</a> case</h3> <blockquote><p>case语句为多选择语句。可以用case语句匹配一个值与一个模式，如果匹配成功，执行相匹配的命令。</p></blockquote> <blockquote><p>case 的语法和 C family 语言差别很大，它需要一个 esac（就是 case 反过来）作为结束标记，每个 case 分支用右圆括号，用两个分号表示 break 。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">case</span> value <span class="token keyword">in</span>
case1<span class="token punctuation">)</span>
  command1
  command2
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
case2<span class="token punctuation">)</span>
  <span class="token function">command</span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
esac
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>case 工作方式如上所示。取值后面必须为单词 in ，每一模式必须以右括号结束。取值可以为变量或常数。匹配发现取值符合某一模式后，其间所有命令开始执行直至 ;;。</p> <p>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。</p> <h3 id="跳出循环"><a href="#跳出循环" aria-hidden="true" class="header-anchor">#</a> 跳出循环</h3> <ul><li><strong>break</strong>命令允许跳出所有循环（终止执行后面的所有循环）。</li> <li><strong>continue</strong>命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出当前循环。</li></ul> <h2 id="shell-函数"><a href="#shell-函数" aria-hidden="true" class="header-anchor">#</a> Shell 函数</h2> <blockquote><p>shell 可以用户定义函数，然后在shell脚本中可以随便调用。</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span> <span class="token keyword">function</span> <span class="token punctuation">]</span> functionName <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  action
  <span class="token punctuation">[</span> <span class="token keyword">return</span> int <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>说明：</p> <ul><li>可以带function fun() 定义，也可以直接 fun() 定义,不带任何参数。</li> <li>参数返回，可以显示加：return 返回，如果不加，将以最后一条命令运行结果，作为返回值。  return 后跟数值 n(0 - 255)</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>funWithReturn<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;这个函数会对输入的两个数字进行相加运算...&quot;</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;输入第一个数字: &quot;</span>
  <span class="token function">read</span> aNum
  <span class="token keyword">echo</span> <span class="token string">&quot;输入第二个数字: &quot;</span>
  <span class="token function">read</span> anotherNum
  <span class="token keyword">echo</span> <span class="token string">&quot;两个数字分别为 <span class="token variable">$aNum</span> 和 <span class="token variable">$anotherNum</span> !&quot;</span>
  <span class="token keyword">return</span> <span class="token variable"><span class="token variable">$((</span> $aNum <span class="token operator">+</span> $anotherNum <span class="token variable">))</span></span>
<span class="token punctuation">}</span>
funWithReturn
<span class="token keyword">echo</span> <span class="token string">&quot;输入的两个数字之和为 <span class="token variable">$?</span> !&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>函数返回值在调用该函数后通过 <strong>$?</strong> 来获得。</p> <p>注意：所有函数在使用前必须定义。这意味着必须将函数放在脚本开始部分，直至 shell 解释器首次发现它时，才可以使用。调用函数仅使用其函数名即可。</p> <h3 id="函数参数"><a href="#函数参数" aria-hidden="true" class="header-anchor">#</a> 函数参数</h3> <blockquote><p>在 Shell 中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数...</p></blockquote> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>funWithParam<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;第一个参数为 <span class="token variable">$1</span> !&quot;</span> <span class="token comment">#1</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;第二个参数为 <span class="token variable">$2</span> !&quot;</span> <span class="token comment">#2</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;第十个参数为 <span class="token variable">$10</span> !&quot;</span> <span class="token comment">#10</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;第十个参数为 <span class="token variable">${10}</span> !&quot;</span> <span class="token comment">#34</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;第十一个参数为 <span class="token variable">${11}</span> !&quot;</span> <span class="token comment">#73</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;参数总数有 <span class="token variable">$#</span> 个!&quot;</span> <span class="token comment">#11</span>
  <span class="token keyword">echo</span> <span class="token string">&quot;作为一个字符串输出所有参数 <span class="token variable">$*</span> !&quot;</span> <span class="token comment"># 1 2 3 4 5 6 7 8 9 34 73</span>
<span class="token punctuation">}</span>
funWithParam 1 2 3 4 5 6 7 8 9 34 73
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>注意，$10 不能获取第十个参数，获取第十个参数需要​${10}。当n&gt;=10时，需要使用${n}来获取参数。</p> <p>另外，还有几个特殊字符用来处理参数：</p> <table><thead><tr><th>参数处理</th> <th>说明</th></tr></thead> <tbody><tr><td>$#</td> <td>传递到脚本的参数个数</td></tr> <tr><td>$*</td> <td>以一个单字符串显示所有向脚本传递的参数</td></tr> <tr><td>$$</td> <td>脚本运行的当前进程 ID 号</td></tr> <tr><td>$@</td> <td>与 $* 相同，但是使用时加引号，并在引号中返回每个参数。</td></tr> <tr><td>$-</td> <td>显示 Shell 使用的当前选项，与 set 命令功能相同。</td></tr> <tr><td>$?</td> <td>显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</td></tr></tbody></table> <h2 id="shell-输入-输出重定向"><a href="#shell-输入-输出重定向" aria-hidden="true" class="header-anchor">#</a> Shell 输入/输出重定向</h2> <p>大多数 UNIX 系统命令从你的终端接受输入并将所产生的输出发送回到您的终端。一个命令通常从一个叫标准输入的地方读取输入，默认情况下，这恰好是你的终端。同样，一个命令通常将其输出写入到标准输出，默认情况下，这也是你的终端。</p> <p>重定向命令列表如下：</p> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>command &gt; file</td> <td>将输出重定向到 file。</td></tr> <tr><td>command &lt; file</td> <td>将输入重定向到 file。</td></tr> <tr><td>command &gt;&gt; file</td> <td>将输出以追加的方式重定向到 file。</td></tr> <tr><td>n &gt; file</td> <td>将文件描述符为 n 的文件重定向到 file。</td></tr> <tr><td>n &gt;&gt; file</td> <td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td></tr> <tr><td>n &gt;&amp; m</td> <td>将输出文件 m 和 n 合并。</td></tr> <tr><td>n &lt;&amp; m</td> <td>将输入文件 m 和 n 合并。</td></tr> <tr><td>&lt;&lt; tag</td> <td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td></tr></tbody></table> <p><em>需要注意的是文件描述符 0 通常是标准输入（STDIN），1 是标准输出（STDOUT），2 是标准错误输出（STDERR）。</em></p> <h2 id="shell-文件包含"><a href="#shell-文件包含" aria-hidden="true" class="header-anchor">#</a> Shell 文件包含</h2> <p>和其他语言一样，Shell 也可以包含外部脚本。这样可以很方便的封装一些公用的代码作为一个独立的文件。</p> <p>Shell 文件包含的语法格式如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token keyword">.</span> fileName <span class="token comment"># 注意点号(.)和文件名中间有一空格</span>
<span class="token comment"># 或</span>
<span class="token function">source</span> fileName
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><!----></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/catalog/" class="prev">
          Catalog
        </a></span> <span class="next"><a href="/vim/">
          慕课网 《玩转 Vim 从放弃到爱不释手》 笔记
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fe53f5dd.js" defer></script><script src="/assets/js/2.ba4870f1.js" defer></script><script src="/assets/js/27.d0bd7cc8.js" defer></script>
  </body>
</html>
